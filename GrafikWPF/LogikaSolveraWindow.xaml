<Window x:Class="GrafikWPF.LogikaSolveraWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Logika Algorytmu Układania Grafiku"
        Width="650"
        SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        WindowStyle="ToolWindow"
        ResizeMode="NoResize"
        Background="LightGray">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <TextBlock TextWrapping="Wrap" LineHeight="20" TextAlignment="Justify">
                <TextBlock FontWeight="Bold" FontSize="16">Jak działa algorytm optymalizujący?</TextBlock>
                <LineBreak/><LineBreak/>
                <Run>
                    Silnik aplikacji (GrafikSolver) jest algorytmem obliczeniowym, którego zadaniem jest znalezienie jednego, możliwie najlepszego grafiku, bazując na wprowadzonych przez Ciebie dostępnościach i ograniczeniach. Proces ten jest realizowany przez algorytm rekurencyjny z nawrotami (backtracking), który systematycznie przeszukuje drzewo możliwych rozwiązań.
                </Run>                
                <LineBreak/><LineBreak/>
                <TextBlock FontWeight="Bold" FontSize="14">Hierarchia priorytetów</TextBlock>
                <LineBreak/>
                <Run>
                    Gdy algorytm znajdzie w pełni ułożony grafik, porównuje go z najlepszym dotychczas znalezionym grafikiem. O tym, który grafik jest "lepszy", decyduje ściśle określona hierarchia celów. Nowy grafik zastąpi stary tylko wtedy, gdy wygra na pierwszym (najważniejszym) poziomie porównania. Jeśli jest remis, sprawdzany jest kolejny poziom, i tak dalej.
                </Run>
                <LineBreak/><LineBreak/>
                <Run FontWeight="Bold">P1: Maksymalna ciągłość obsady na początku miesiąca.</Run>
                <Run>
                    Najważniejszym celem jest zapewnienie nieprzerwanej obsady dyżurowej od pierwszego dnia miesiąca. Grafik, który ma obsadzone pierwsze 15 dni bez przerwy, zawsze będzie lepszy od grafiku, który ma obsadzone łącznie 25 dni, ale z przerwą (brakiem obsady) np. dnia trzeciego.
                </Run>
                <LineBreak/><LineBreak/>
                <Run FontWeight="Bold">P2: Maksymalna łączna liczba obsadzonych dni.</Run>
                <Run>
                    Jeśli dwa grafiki mają taką samą ciągłość początkową (np. oba mają luki dopiero 16. dnia), wygrywa ten, który ma więcej obsadzonych dyżurów w całym miesiącu.
                </Run>
                <LineBreak/><LineBreak/>
                <Run FontWeight="Bold">P3: Maksymalizacja zrealizowanych "Bardzo chcę".</Run>
                <Run>
                    Przy remisie na poprzednich poziomach, preferowany jest grafik, w którym więcej dyżurów przydzielono lekarzom ze statusem "Bardzo chcę".
                </Run>
                <LineBreak/><LineBreak/>
                <Run FontWeight="Bold">P4: Maksymalizacja zrealizowanych "Chcę".</Run>
                <Run>
                    W przypadku kolejnego remisu, wygrywa grafik realizujący więcej dyżurów ze statusem "Chcę".
                </Run>
                <LineBreak/><LineBreak/>
                <Run FontWeight="Bold">P5: Równomierne obciążenie lekarzy.</Run>
                <Run>
                    Ostatecznym kryterium, przy remisie na wszystkich powyższych poziomach, jest jak najbardziej sprawiedliwy (proporcjonalny) podział dyżurów. Algorytm preferuje grafik, w którym procentowe wypełnienie limitu dyżurów jest jak najbardziej zbliżone dla wszystkich lekarzy. Miarą jest tu jak najniższe odchylenie standardowe tych wartości.
                </Run>
                <LineBreak/><LineBreak/>
                <TextBlock FontWeight="Bold" FontSize="14">Twarde zasady (ograniczenia)</TextBlock>
                <LineBreak/>
                <Run>
                    Podczas budowania grafiku, algorytm bezwzględnie przestrzega następujących reguł dla każdego dnia:
                </Run>
                <LineBreak/>
                <BulletDecorator Margin="20,5,0,0">
                    <BulletDecorator.Bullet>
                        <TextBlock Text="•" Margin="0,0,10,0"/>
                    </BulletDecorator.Bullet>
                    <TextBlock TextWrapping="Wrap"><Run FontWeight="Bold">Limit dyżurów:</Run> Lekarz nie zostanie przypisany do dyżuru, jeśli osiągnął już swój maksymalny limit.</TextBlock>
                </BulletDecorator>
                <BulletDecorator Margin="20,5,0,0">
                    <BulletDecorator.Bullet>
                        <TextBlock Text="•" Margin="0,0,10,0"/>
                    </BulletDecorator.Bullet>
                    <TextBlock TextWrapping="Wrap"><Run FontWeight="Bold">Dostępność:</Run> Lekarz nie może dyżurować w dniu oznaczonym jako "---", "Urlop" lub "Inny dyżur".</TextBlock>
                </BulletDecorator>
                <BulletDecorator Margin="20,5,0,0">
                    <BulletDecorator.Bullet>
                        <TextBlock Text="•" Margin="0,0,10,0"/>
                    </BulletDecorator.Bullet>
                    <TextBlock TextWrapping="Wrap"><Run FontWeight="Bold">Odpoczynek:</Run> Lekarz nie może dyżurować dwa dni z rzędu. Wyjątkiem jest sytuacja, gdy na drugi dzień ma status "Bardzo chcę".</TextBlock>
                </BulletDecorator>
                <BulletDecorator Margin="20,5,0,0">
                    <BulletDecorator.Bullet>
                        <TextBlock Text="•" Margin="0,0,10,0"/>
                    </BulletDecorator.Bullet>
                    <TextBlock TextWrapping="Wrap"><Run FontWeight="Bold">Kolizja z "Innym dyżurem":</Run> Jeśli lekarz ma "Inny dyżur" (np. w innym szpitalu), nie może mieć dyżuru w dniu poprzedzającym i następującym. Zasada ta jest ignorowana, jeśli na ten sąsiadujący dzień przypada status "Bardzo chcę".</TextBlock>
                </BulletDecorator>
                <BulletDecorator Margin="20,5,0,0">
                    <BulletDecorator.Bullet>
                        <TextBlock Text="•" Margin="0,0,10,0"/>
                    </BulletDecorator.Bullet>
                    <TextBlock TextWrapping="Wrap"><Run FontWeight="Bold">Dyżur warunkowy:</Run> Lekarz może w całym miesiącu zrealizować tylko jeden dyżur ze statusem "Mogę warunkowo".</TextBlock>
                </BulletDecorator>
            </TextBlock>
        </ScrollViewer>

        <Button Grid.Row="1" Content="Zamknij" IsDefault="True" Click="Zamknij_Click" HorizontalAlignment="Right" Margin="0,15,0,0" Padding="10,5"/>
    </Grid>
</Window>